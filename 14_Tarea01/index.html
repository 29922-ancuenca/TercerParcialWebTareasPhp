<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Taller JSON + PHP + MySQL</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
    <!-- Archivo CSS separado -->
    <link rel="stylesheet" href="styles.css">
   
</head>

<body>

    <!-- Encabezado -->
    <div class="header-box">
        <h2>Gestión de Productos</h2>
        <p style="margin: 0; opacity: .9;">Control y registro de ítems</p>
    </div>

  <div class="container" style="max-width: 850px;">

      <div class="main-card">

            <!-- Inputs -->
            <form>
                <div class="form-row">
                    <div class="col-md-6 mb-3">
                        <label>Producto</label>
                        <select class="form-control" id="producto" required>
                            <option value="">Seleccione un producto...</option>
                        </select>
                        <!-- Campo oculto para mantener el nombre para el JS existente -->
                        <input type="hidden" id="nombre">
                    </div>

                    <div class="col-md-3 mb-3">
                        <label>Precio ($)</label>
                        <input type="number" class="form-control" id="precio" placeholder="0.00" min="1" step="0.01"
                               required readonly>
                    </div>

                    <div class="col-md-3 mb-3">
                        <label>Cantidad</label>
                        <input type="number" class="form-control" id="cantidad" placeholder="0" min="1" max="10000"
                               pattern="^[1-9]\d*$" required>
                    </div>
                </div>

                <!-- Botones -->
                <div class="row mt-2">
                    <div class="col-md-6 mb-2">
                        <button type="button" class="btn btn-add btn-block text-white" id="agregar">
                            + Agregar
                        </button>
                    </div>

                    <div class="col-md-6 mb-2">
                        <button type="button" class="btn btn-save btn-block text-white" id="guardar">
                            Guardar en Base de Datos
                        </button>
                    </div>
                </div>
            </form>

            <hr>

        <!-- Tabla -->
		<div class="col-12" id="productos" >
            <div class="table-responsive">	
                <table class="table table-bordered text-center" id="lista">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Precio</th>
                            <th>Cantidad</th>
                            <th>Total</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- JS llena esto con html Doom -->
                    </tbody>
                </table>
            </div>
		</div>

            <!-- Total -->
            <!-- <div id="total">
                Total General: $0.00
                Imprime la suma de los valores de la columna Total
            </div> -->
			

      </div>
   </div>



<div class="col-10 text-right" id="total"> </div>


<!-- MODAL DE CONFIRMACIÓN DE ELIMINACIÓN -->
<div class="modal fade" id="modalEliminar" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">

      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">Confirmar eliminación</h5>
        <button type="button" class="close text-white" data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
        ¿Está seguro que desea eliminar este producto?
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
        <button id="btnConfirmarEliminar" type="button" class="btn btn-danger">Eliminar</button>
      </div>

    </div>
  </div>
</div>


    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
	
	<script>
        $(document).ready(function () {
 
    // Cuando el usuario elige un producto, fijar precio y nombre
    $("#producto").on("change", function () {
        let opcion = $(this).find("option:selected");
        let precio = parseFloat(opcion.data("precio")) || 0;

        // El precio queda "quemado" según el producto
        $("#precio").val(precio.toFixed(2));

        // Guardamos el nombre en el campo oculto para que el JS existente lo use
        $("#nombre").val(opcion.text());
    });

});

    </script>

</body>
</html>
